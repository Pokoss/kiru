import{r,j as s,y as d}from"./app-B3s_Rfkk.js";import{r as t}from"./index-m6Bsknyo.js";import{X as q,Q,L as V,C as Z,B as n}from"./Layout-OHpAj_Bx.js";function G({employees:o}){const[u,p]=r.useState(""),[N,D]=r.useState(""),[h,g]=r.useState(""),[m,x]=r.useState(""),[k,j]=r.useState(""),[F,y]=r.useState(""),[v,b]=r.useState(""),[f,z]=r.useState(""),[S,O]=r.useState(""),[J,w]=r.useState(o.current_page),B=e=>{d.get("/dashboard/employee",{page:e,search:S},{preserveState:!0})},I=e=>{w(e),B(e)},L=e=>{const a=e.target.files[0];new Z(a,{quality:.6,success(c){D(c)},error(c){console.log(c.message)}})},P=e=>{e.preventDefault(),O(e.target.value),w(1);var a=e.target.value;d.get("/dashboard/employee",{search:a,page:1},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{}})},A=async e=>{e.preventDefault();try{d.post("/delete-employee",{editEmployeeId:f},{onSuccess:()=>{n.success("Deleted Successfully"),i()}})}catch(a){n.dismiss(),n.error(a),console.log("Error checking username:",a)}},H=async e=>{e.preventDefault();try{d.post("/edit-employee",{editEmployeeId:f,editPosition:v},{onSuccess:()=>{n.success("Edited Successfully"),i()}})}catch(a){n.dismiss(),n.error(a),console.log("Error checking username:",a)}},R=async e=>{if(e.preventDefault(),u=="")n.dismiss(),n.error("Write the email of the employee");else if(m=="")n.dismiss(),n.error("State the position");else try{d.post("/add-employee",{name:u,title:m,about:h,image:N},{onSuccess:()=>{n.success("registered successfully"),p(""),x(""),g(""),l()}})}catch(a){n.dismiss(),n.error(a),console.log("Error checking username:",a),l()}};function T(e,a,c,X){i("xl"),j(e),y(a),b(c),z(X)}const W={headRow:{style:{border:"none"}},headCells:{style:{color:"#997400",fontSize:"14px"}},rows:{highlightOnHoverStyle:{backgroundColor:"rgb(230, 244, 244)",borderBottomColor:"#FFFFFF",outline:"1px solid #FFFFFF"}},pagination:{style:{border:"none"}}},_=[{name:"Name",selector:e=>e.name},{name:"Title",selector:e=>e.title},{name:"Email",selector:e=>e.about},,{name:"Added On",selector:e=>new Date(e.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})},{selector:e=>s.jsx("button",{onClick:()=>T(e.user.name,e.user.email,e.position,e.id),className:"bg-green-600 rounded-md p-1",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"white",className:"w-5 h-5",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})})})}],[E,M]=r.useState(null),l=e=>M(e),[C,U]=r.useState(null),i=e=>U(e);return s.jsxs("div",{children:[s.jsx(r.Fragment,{children:s.jsxs(t.Dialog,{open:E==="xl",size:E,handler:l,children:[s.jsx(t.DialogHeader,{children:s.jsx(t.Typography,{variant:"h5",color:"blue-gray",children:"Add a employee"})}),s.jsxs("form",{onSubmit:R,children:[s.jsxs(t.DialogBody,{divider:!0,className:"grid place-items-center gap-4",children:[s.jsx(t.Input,{label:"Image",accept:".jpg,.jpeg,.png",size:"md",type:"file",onChange:L}),s.jsx(t.Input,{label:"Name",color:"deep-orange",value:u,onChange:e=>p(e.target.value),size:"sm"}),s.jsx(t.Input,{label:"Title",color:"deep-orange",value:m,onChange:e=>x(e.target.value),size:"sm"}),s.jsx(t.Input,{label:"About",color:"deep-orange",value:h,onChange:e=>g(e.target.value),size:"sm"})]}),s.jsxs(t.DialogFooter,{className:"space-x-2",children:[s.jsx(t.Button,{onClick:l,variant:"gradient",color:"blue-gray",children:"Close"}),s.jsx(t.Button,{type:"submit",className:"bg-primary",children:"Add"})]})]})]})}),s.jsx(q,{title:s.jsxs("div",{className:"flex flex-col md:flex-row space-x-0 md:space-x-5 space-y-5 md:space-y-0 whitespace-nowrap items-start md:items-center justify-between w-full border-b-2 border-primary pb-3 pt-2",children:[s.jsx("span",{children:"Employees"}),s.jsxs("div",{className:"flex space-x-3 items-center md:space-x-5 w-full md:w-1/2 md:justify-end print:hidden",children:[s.jsx(t.Input,{type:"text",label:"Search",value:S,onChange:P,className:"md:w-full"}),s.jsx("span",{children:s.jsxs(t.Button,{size:"sm",color:"success",type:"submit",className:"flex h-10 items-center bg-primary",onClick:()=>l("xl"),children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"mr-2 w-5 h-5",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),"Add"]})})]})]}),columns:_,data:o.data,customStyles:W,pointerOnHover:!0,onRowClicked:(e,a)=>!children&&ExpandableComponent?null:editRow(e,a),highlightOnHover:!0,pagination:!0,paginationServer:!0,paginationTotalRows:o.total,paginationPerPage:o.per_page,onChangePage:I,paginationRowsPerPageOptions:[]}),s.jsx(r.Fragment,{children:s.jsxs(t.Dialog,{open:C==="xl",size:C,handler:i,children:[s.jsx(t.DialogHeader,{children:s.jsx(t.Typography,{variant:"h5",color:"blue-gray",children:"Edit Employee"})}),s.jsxs("form",{onSubmit:H,children:[s.jsxs(t.DialogBody,{divider:!0,className:"grid place-items-center gap-4",children:[s.jsx(t.Input,{color:"deep-orange",label:"Name",disabled:!0,value:k,onChange:e=>j(e.target.value),size:"sm"}),s.jsx(t.Input,{color:"deep-orange",label:"Email",disabled:!0,value:F,onChange:e=>y(e.target.value),size:"sm"}),s.jsxs(t.Select,{color:"deep-orange",label:"Position",value:v,onChange:e=>b(e),children:[s.jsx(t.Option,{value:"owner",children:"owner"}),s.jsx(t.Option,{value:"admin",children:"admin"}),s.jsx(t.Option,{value:"accountant",children:"accountant"}),s.jsx(t.Option,{value:"hr",children:"hr"}),s.jsx(t.Option,{value:"dispenser",children:"dispenser"}),s.jsx(t.Option,{value:"cashier",children:"cashier"})]})]}),s.jsx(t.DialogFooter,{children:s.jsxs("div",{className:"flex w-full justify-between",children:[s.jsx(t.Button,{onClick:A,variant:"gradient",color:"red",children:"Delete"}),s.jsxs("div",{className:"space-x-2",children:[s.jsx(t.Button,{onClick:i,variant:"gradient",color:"blue-gray",children:"Close"}),s.jsx(t.Button,{type:"submit",className:"bg-primary",children:"Edit"})]})]})})]})]})}),s.jsx(Q,{})]})}G.layout=o=>s.jsx(V,{children:o});export{G as default};
